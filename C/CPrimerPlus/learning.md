<!--
 * @Author: peng.xie
 * @Email: helianthus547@gmail.com
 * @Date: 2021-08-20 23:04:39
 * @LastEditTime: 2021-08-23 16:29:37
 * @Description: learn **C Primer Plus** book text
-->
# 导言

## 语言学习过程

一门计算机语言广义上来说主要包括两部分：一部分是语言的语法，另外一部分是将语言翻译成机器语言的工具（编译器或者解释器）。一门语言的语法学习不仅要学习原生的语法，还有用语法实现的库。C语言是编译语言，C语言编译器中不仅包含了ANSI C标准中实现的C库、编译器，还包括了链接器。

## 这本书的组织结构

1. 第一章和第二章讲了C语言编程的预备知识

第一章：C语言起源和编译C语言

第二章：一个C语言程序示例

2. 第三章到第十五章讲了C语言编程的语法知识

第三章和第四章：讲了数据类型，第四章讲的字符串

第五章：运算符、表达式和语句

第六章和第七章：循环与分支

第八章：字符输入输出验证，前面的总结和例子

**第九章和第十章：函数、数组和指针**

第十一章：字符串，字符串函数

**第十二章：存储类别、链接和内存管理**

第十三章：文件输入输出

第十四章：结构

第十五章：位操作

3. 第十六章和第十七章讲了C预处理器、C库和一些数据结构

# 第一章：初识C语言

## 内容梗概

- C语言的历史和特性
- C标准和C程序编写步骤
- C语言编译过程
- 在常见的系统中运行C程序

## C语言起源

Ken Thompson, Dennis Ritchie在开发UNIX操作系统时设计了C语言，从B语言发展而来。语言设计的目标是专门为程序员设计开发

强类型、弱检查、静态、编译性语言

## C语言特点

- 设计特性：自顶向下的规划、结构化编程和模块化设计
- 运行速度快：具有汇编语言才具有的微调控制能力（汇编语言是为特殊的中央处理单元设计的一系列内部指令，使用助记符表示；不同的CPU central processing unit系列使用不同的汇编语言）
- 有**较好**的可移植性：程序中针对特殊硬件设备或操作系统特殊功能编写的部分，通常是不可移植的
- 可以访问硬件、操作内存中的位
- IOCCC：国际C语言混乱代码大赛

- C++在C语言的基础上嫁接了面向对象编程工具（面向对象编程是一门哲学，它通过对语言建模来适应问题，而不是对问题建模以适应语言）

## 计算机、高级计算机语言与编译器

### 计算机组成部件

1. CPU：中央处理单元，控制，计算
2. RAM：随机存取内存，存储程序和文件的工作区
3. 永久内存存储设备：机械硬盘、固态硬盘，关机也不会丢失存储的程序和文件
4. 外围设备：键盘、鼠标、触摸屏、监视器提供人机交互

### CPU

1. CPU反复从内存中取指令执行，更新指令，

2. 有自己的小工作区：寄存器，其中一个寄存器存储下一条指令的内存地址
3. CPU理解的指令的集合叫做指令集
4. **存储在计算机中所有的内容都是数字，指令集中的每条指令都有一个数字码，计算机程序最终必须以数字指令码（机器语言）来表示**

### 高级语言与编译器

1. **编译器将C语言翻译成为机器语言，桥梁作用**

2. 使用高级编程语言，可以在更抽象的层面表达你的想法
3. 编译器封装了系统架构特性

## C语言标准

|   时间    |                        C语言标准名称                         |
| :-------: | :----------------------------------------------------------: |
|   1978    | K&R C: Brian Kernighan, Dennis Ritchie合著的The C Programming Language |
| 1989/1990 |                    ISO: ANSI C 或者叫 C89                    |
|   1999    |                             C99                              |
|           |                             C1X                              |
|   2011    |                         ISO/IEC C11                          |

The C Programming Language中只有C实现，没有定义C库，UNIX实现的C库成为了标准库

ANSI C

1. 保持语言精炼简单
2. 只提供一种方法执行一项操作
3. 让程序运行更快，即使不能保持其可移植性：作为实现，应该针对目标计算机来定义最合适的某特定操作，而不是强加一个抽象，统一的定义

## 编写程序7大步骤

1. 定义程序的目标
2. 设计程序
3. 编写代码
4. 编译

编译的细节取决于编程的环境

编译器是把源代码转换成可执行代码的程序。可执行代码是用计算机的机器语言表示的代码，这种语言由数字码表示的指令组成。在大多数系统中，编译器运行链接器，用来链接源代码和库代码

5. 运行程序
6. 测试和调试程序
7. 维护和修改程序

磨刀不误砍柴工，定义和设计程序的环节非常重要

## C语言编译过程

C source code file：源代码文件，以.c结尾，.之前的称为基本名base name，后面的称为扩展名extension，两者的组合就是文件名

### 目标代码文件、可执行文件和库

编译器把源代码转换成中间代码，链接器把中间代码和其它代码合并，生成可执行文件

C使用这种分而治之的方法方便对程序进行模块化，可以独立编译单独的模块，稍后再用链接器合并已编译的模块。通过这种方式，如果只更改某个模块，不必重新编译其它模块

链接器将编写的程序的目标代码、系统启动代码和预编译的库代码合并。库代码中，链接器只会把程序中要用到的库函数代码提取出来

启动代码（start up code）：启动代码充当着程序和操作系统之间的接口

目标文件和可执行文件都由机器语言指令组成的

## 在常见的系统中运行C程序

1. 类UNIX操作系统

CC：C语言编译器的别名

GNU

gcc -std=c99

gcc -std=c11

gcc -std=c1x

LLVM

1. Windows
2. Mac
